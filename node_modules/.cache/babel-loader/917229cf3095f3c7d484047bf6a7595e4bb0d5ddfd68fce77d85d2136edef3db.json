{"ast":null,"code":"import axios from \"axios\";\nimport { setIsloggedin, setToken, setUser } from \"../reducers/auth\";\nimport { toast } from \"react-toastify\";\nexport const login = (data, navigate) => async dispatch => {\n  try {\n    const response = await axios.post(`https://km4-challenge-5-api.up.railway.app/api/v1/auth/login\n        `, data, {\n      \"Content-Type\": \"application/json\"\n    });\n    const {\n      token\n    } = response === null || response === void 0 ? void 0 : response.data.data;\n    dispatch(setToken(token));\n    dispatch(setIsloggedin(true));\n    navigate(\"/\");\n  } catch (err) {\n    var _err$response, _err$response$data;\n    if (axios.isAxiosError(err)) toast.error(err === null || err === void 0 ? void 0 : (_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.message);else toast.error(err === null || err === void 0 ? void 0 : err.message);\n  }\n};\nexport const getProfile = () => async (dispatch, getState) => {\n  try {\n    const {\n      token\n    } = getState().auth;\n    const reponse = await axios.get(`https://km4-challenge-5-api.up.railway.app/api/v1/auth/me`, {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    });\n    const {\n      data\n    } = reponse === null || reponse === void 0 ? void 0 : reponse.data;\n    dispatch(setUser(data));\n  } catch (err) {\n    var _err$response2, _err$response2$data;\n    if (axios.isAxiosError(err)) toast.error(err === null || err === void 0 ? void 0 : (_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : (_err$response2$data = _err$response2.data) === null || _err$response2$data === void 0 ? void 0 : _err$response2$data.message);else toast.error(err === null || err === void 0 ? void 0 : err.message);\n  }\n};","map":{"version":3,"names":["axios","setIsloggedin","setToken","setUser","toast","login","data","navigate","dispatch","response","post","token","err","_err$response","_err$response$data","isAxiosError","error","message","getProfile","getState","auth","reponse","get","headers","Authorization","_err$response2","_err$response2$data"],"sources":["/Users/yessyou/Documents/Binar/mas Fahmi/kampus-merdeka-4-frontend/chapter-6/topic-4-fejs-1/src/redux/actions/auth.js"],"sourcesContent":["import axios from \"axios\";\nimport { setIsloggedin, setToken, setUser } from \"../reducers/auth\";\nimport { toast } from \"react-toastify\";\n\nexport const login = (data, navigate) => async (dispatch) => {\n  try {\n    const response = await axios.post(\n      `https://km4-challenge-5-api.up.railway.app/api/v1/auth/login\n        `,\n      data,\n      { \"Content-Type\": \"application/json\" }\n    );\n\n    const { token } = response?.data.data;\n    dispatch(setToken(token));\n    dispatch(setIsloggedin(true));\n    navigate(\"/\");\n  } catch (err) {\n    if (axios.isAxiosError(err)) toast.error(err?.response?.data?.message);\n    else toast.error(err?.message);\n  }\n};\n\nexport const getProfile = () => async (dispatch, getState) => {\n  try {\n    const { token } = getState().auth;\n\n    const reponse = await axios.get(\n      `https://km4-challenge-5-api.up.railway.app/api/v1/auth/me`,\n      { headers: { Authorization: `Bearer ${token}` } }\n    );\n    \n    const { data } = reponse?.data;\n    dispatch(setUser(data));\n  } catch (err) {\n    if (axios.isAxiosError(err)) toast.error(err?.response?.data?.message);\n    else toast.error(err?.message);\n  }\n};\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,aAAa,EAAEC,QAAQ,EAAEC,OAAO,QAAQ,kBAAkB;AACnE,SAASC,KAAK,QAAQ,gBAAgB;AAEtC,OAAO,MAAMC,KAAK,GAAGA,CAACC,IAAI,EAAEC,QAAQ,KAAK,MAAOC,QAAQ,IAAK;EAC3D,IAAI;IACF,MAAMC,QAAQ,GAAG,MAAMT,KAAK,CAACU,IAAI,CAC9B;AACP,SAAS,EACHJ,IAAI,EACJ;MAAE,cAAc,EAAE;IAAmB,CACvC,CAAC;IAED,MAAM;MAAEK;IAAM,CAAC,GAAGF,QAAQ,aAARA,QAAQ,uBAARA,QAAQ,CAAEH,IAAI,CAACA,IAAI;IACrCE,QAAQ,CAACN,QAAQ,CAACS,KAAK,CAAC,CAAC;IACzBH,QAAQ,CAACP,aAAa,CAAC,IAAI,CAAC,CAAC;IAC7BM,QAAQ,CAAC,GAAG,CAAC;EACf,CAAC,CAAC,OAAOK,GAAG,EAAE;IAAA,IAAAC,aAAA,EAAAC,kBAAA;IACZ,IAAId,KAAK,CAACe,YAAY,CAACH,GAAG,CAAC,EAAER,KAAK,CAACY,KAAK,CAACJ,GAAG,aAAHA,GAAG,wBAAAC,aAAA,GAAHD,GAAG,CAAEH,QAAQ,cAAAI,aAAA,wBAAAC,kBAAA,GAAbD,aAAA,CAAeP,IAAI,cAAAQ,kBAAA,uBAAnBA,kBAAA,CAAqBG,OAAO,CAAC,CAAC,KAClEb,KAAK,CAACY,KAAK,CAACJ,GAAG,aAAHA,GAAG,uBAAHA,GAAG,CAAEK,OAAO,CAAC;EAChC;AACF,CAAC;AAED,OAAO,MAAMC,UAAU,GAAGA,CAAA,KAAM,OAAOV,QAAQ,EAAEW,QAAQ,KAAK;EAC5D,IAAI;IACF,MAAM;MAAER;IAAM,CAAC,GAAGQ,QAAQ,CAAC,CAAC,CAACC,IAAI;IAEjC,MAAMC,OAAO,GAAG,MAAMrB,KAAK,CAACsB,GAAG,CAC5B,2DAA0D,EAC3D;MAAEC,OAAO,EAAE;QAAEC,aAAa,EAAG,UAASb,KAAM;MAAE;IAAE,CAClD,CAAC;IAED,MAAM;MAAEL;IAAK,CAAC,GAAGe,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEf,IAAI;IAC9BE,QAAQ,CAACL,OAAO,CAACG,IAAI,CAAC,CAAC;EACzB,CAAC,CAAC,OAAOM,GAAG,EAAE;IAAA,IAAAa,cAAA,EAAAC,mBAAA;IACZ,IAAI1B,KAAK,CAACe,YAAY,CAACH,GAAG,CAAC,EAAER,KAAK,CAACY,KAAK,CAACJ,GAAG,aAAHA,GAAG,wBAAAa,cAAA,GAAHb,GAAG,CAAEH,QAAQ,cAAAgB,cAAA,wBAAAC,mBAAA,GAAbD,cAAA,CAAenB,IAAI,cAAAoB,mBAAA,uBAAnBA,mBAAA,CAAqBT,OAAO,CAAC,CAAC,KAClEb,KAAK,CAACY,KAAK,CAACJ,GAAG,aAAHA,GAAG,uBAAHA,GAAG,CAAEK,OAAO,CAAC;EAChC;AACF,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}